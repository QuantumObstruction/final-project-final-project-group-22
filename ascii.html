<style>
p {
    font-family: "Courier New", Courier,monospace;
    font-size:10px;
    line-height:6px;
}
</style>


<script>
var openFile = function(event) {
	var input = event.target;

	// Instantiate FileReader
	var reader = new FileReader();
	reader.onload = function(){
		TheFileContents = reader.result;
    var ascii = ["@","%","#","*","+","=","-",":",".","&nbsp"]
    // var image = document.createElement("img");
    var image = new Image;
    image.src = reader.result;

    image.onload = function(e) {
      console.log(image.width);
      console.log(image.height);

    var size = 200;

    // document.body.appendChild(image);
    console.log(reader.result);
    var canvas = document.createElement('canvas');
    canvas.id =  'canvasImage';
    console.log(image.width)
    console.log(image.height)
    console.log(image.height/image.width)
    canvas.width = size;
    canvas.height = size*(image.height/image.width);
    canvas.getContext('2d').drawImage(image, 0, 0, canvas.width, canvas.height);
    var pixelData = canvas.getContext('2d').getImageData(40, 50, 1, 1).data;
    var string = "";
    console.log(canvas.height)
    for(i=0;i<canvas.height;i++){
        for(j=0;j<canvas.width;j++){
          pixelData = canvas.getContext('2d').getImageData(j, i, 1, 1).data;

          string = string +  ascii[Math.round((((pixelData[0]+pixelData[1]+pixelData[2])/3)/28.333))];
        }
        string = string + "<BR/>";
      }
      console.log(string)
      //var asciiDiv = document.createElement('div');
      document.getElementById('plswork').innerHTML = string;

      // document.getElementById('plswork').style.fontFamiliy = ;
};
		// Update the output to include the <img> tag with the data URL as the source
		//document.getElementById("TheImageContents").innerHTML = '<h2>The image that you selected</h2><p><img width="200" src="'+TheFileContents+'" /></p>';
	};
	// Produce a data URL (base64 encoded string of the data in the file)
	// We are retrieving the first file from the FileList object
	reader.readAsDataURL(input.files[0]);

};
</script>

<input type='file' accept='images/*' onchange='openFile(event);'>
<div id="TheImageContents">
<p id = "plswork"> pls work </p>
</div>
